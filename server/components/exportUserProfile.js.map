{"version":3,"sources":["components/exportUserProfile.js"],"names":["MONTHS","LANGUAGE_LEVELS","_sortResults","arr","field","asc","sort","el1","el2","_getSkillDescription","years","skillFromated","_getLanguageDescription","language","name","level","_setPeriodDate","forEach","exp","periodDate","_formatDateDisplay","startDate","endDate","getFullYear","getMonth","_getSmallestACDate","experiences","date","i","length","formatSkillsData","skillsCloud","filter","skill","result","dictionary","groupBy","prop","console","log","iterator","values","parseInt","push","_getResumeInfo","user","aboutMe","summaryOfQualification","certifications","languageSkills","education","avenueCodeExperiences","isAvenueCode","otherExperiences","ACdate","smallestDate","description","ed","activities","displayName","skills","groupedExperiences","ac","others","showEducationSection","showSummaryOfQualificationSection","showCertificationSection","showExperienceSection","showSkillCloudSection","showLanguageSkillSection","showAvenueCodeLabelExperienceSection","months","languageLevels","formatDisplayDate","generateResumeData"],"mappings":"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","file":"components/exportUserProfile.js","sourcesContent":["'use strict';\r\nimport underscore from 'underscore';\r\n\r\n\r\nconst MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\r\nconst LANGUAGE_LEVELS = ['Elementary Proficiency', 'Limited Working Proficiency',\r\n    'Minimum Professional Proficiency', 'Full Professional Proficiency', 'Native or Bilingual'];\r\n\r\nfunction _sortResults(arr, field, asc) {\r\n  arr = arr.sort((el1, el2) => {\r\n    if (asc) {\r\n      return (el1[field] > el2[field]) ? 1 : ((el1[field] < el2[field]) ? -1 : 0);\r\n    } else {\r\n      return (el2[field] > el1[field]) ? 1 : ((el2[field] < el1[field]) ? -1 : 0);\r\n    }\r\n  });\r\n}\r\n\r\nfunction _getSkillDescription(years) {\r\n  let skillFromated = years > 1 ?\r\n    `${years} years experience: ` :\r\n    ( years === 1 ? `${years} year experience: ` :  `Less than 1 year experience: `);\r\n\r\n  return skillFromated;\r\n}\r\n\r\nfunction _getLanguageDescription(language) {\r\n    let {name, level} = language;\r\n\r\n    return `${name}: ${LANGUAGE_LEVELS[level-1]}`;\r\n}\r\n\r\nfunction _setPeriodDate(arr) {\r\n  arr.forEach(exp => exp.periodDate = _formatDateDisplay(exp.startDate, exp.endDate));\r\n}\r\n\r\nfunction _formatDateDisplay(startDate, endDate){\r\n  if(endDate){\r\n    if(startDate.getFullYear() === endDate.getFullYear()){\r\n      return `${MONTHS[startDate.getMonth()]} ${startDate.getFullYear()} - ${MONTHS[endDate.getMonth()]} ${endDate.getFullYear()}`;\r\n    }\r\n    else{\r\n      return `${startDate.getFullYear()} - ${endDate.getFullYear()}`;\r\n    }\r\n  }\r\n  else{\r\n    return `Since ${MONTHS[startDate.getMonth()]} ${startDate.getFullYear()}`;\r\n  }\r\n  \r\n}\r\n\r\nfunction _getSmallestACDate(experiences){\r\n    let date = experiences[0].startDate;\r\n    let i = 0;\r\n    for(;i < experiences.length; i++){\r\n      if(experiences[i].startDate < date){\r\n        date = experiences[i].startDate;\r\n      }\r\n    }\r\n    return date;\r\n}\r\n\r\nfunction formatSkillsData(skillsCloud){\r\n   skillsCloud = skillsCloud.filter(skill => skill !== null);\r\n   let result = [];\r\n   let dictionary = underscore.groupBy(skillsCloud, 'experienceYears');\r\n\r\n   for(var prop in dictionary){\r\n     console.log(prop);\r\n     let iterator = dictionary[prop];\r\n     let values = _getSkillDescription(parseInt(prop));\r\n     for(var i = 0; i < iterator.length; i++){\r\n       values += iterator[i].name;\r\n       if(i < iterator.length - 1){\r\n         values += ', ';\r\n       }\r\n     }\r\n     result.push({ 'description' : values });\r\n   }\r\n   return result;\r\n}\r\n\r\nfunction _getResumeInfo(user) {\r\n  let { experiences, skillsCloud, aboutMe,\r\n    summaryOfQualification, certifications, languageSkills,\r\n    education, name } = user;\r\n  let avenueCodeExperiences = experiences.filter(exp => exp.isAvenueCode);\r\n  let otherExperiences = experiences.filter(exp => !exp.isAvenueCode);\r\n  let ACdate;\r\n\r\n  _sortResults(avenueCodeExperiences, 'startDate', true);\r\n\r\n  _setPeriodDate(avenueCodeExperiences);\r\n  _setPeriodDate(otherExperiences);\r\n  _setPeriodDate(certifications);\r\n  _setPeriodDate(education);\r\n\r\n  if (avenueCodeExperiences.length && avenueCodeExperiences.length > 0) {\r\n    const smallestDate = _getSmallestACDate(avenueCodeExperiences);\r\n    ACdate = _formatDateDisplay(smallestDate);\r\n  }\r\n\r\n  languageSkills = languageSkills.filter(language => language !== null);\r\n  languageSkills.forEach(language => {\r\n    if(language){\r\n      language.description = _getLanguageDescription(language);\r\n    }\r\n  });\r\n\r\n  education.forEach(ed => {\r\n    if(!ed.activities) {\r\n      ed.activities = '';\r\n    }\r\n  });\r\n\r\n  return {\r\n    displayName: name,\r\n    aboutMe,\r\n    summaryOfQualification,\r\n    certifications,\r\n    languageSkills,\r\n    skills: formatSkillsData(skillsCloud),\r\n    groupedExperiences: {\r\n      ac: avenueCodeExperiences,\r\n      others: otherExperiences\r\n    },\r\n    education,\r\n    ACdate,\r\n    showEducationSection: education.length ? true : false,\r\n    showSummaryOfQualificationSection: summaryOfQualification ? true : false,\r\n    showCertificationSection: certifications.length ? true : false,\r\n    showExperienceSection: experiences.length ? true : false,\r\n    showSkillCloudSection: skillsCloud.length ? true : false,\r\n    showLanguageSkillSection: languageSkills.length ? true : false,\r\n    showAvenueCodeLabelExperienceSection: avenueCodeExperiences.length ? true : false,\r\n    months: MONTHS,\r\n    languageLevels: LANGUAGE_LEVELS,\r\n    formatDisplayDate: _formatDateDisplay\r\n  };\r\n}\r\n\r\nfunction generateResumeData(user){\r\n  let {education, experiences, certifications} = user;\r\n\r\n  _sortResults(education, 'startDate', true);\r\n  _sortResults(experiences, 'startDate', false);\r\n  _sortResults(certifications, 'startDate', false);\r\n\r\n\r\n  return _getResumeInfo(user);\r\n}\r\n\r\n\r\nexport default { generateResumeData };\r\n"],"sourceRoot":"/source/"}